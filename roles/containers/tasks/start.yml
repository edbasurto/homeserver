---

- name: Execute Tailscale Installation Script
  become: yes
  shell: "curl -fsSL https://tailscale.com/install.sh | sh"

- name: Get Running Containers
  docker_host_info:
    containers: yes
  register: docker_info

- name: Stop Running Containers
  docker_container:
    name: "{{ item }}"
    state: stopped
  loop: "{{ docker_info.containers | map(attribute='Id') | list }}"
  

- name: Start Docker Compose
  community.docker.docker_compose:
    project_src: /docker
  register: output

- name: Start Dashdot Docker Compose
  community.docker.docker_compose:
    project_src: /docker/dashdot
  register: output

- name: Start Actual Budget Docker Compose
  community.docker.docker_compose:
    project_src: /docker/actual-budget
  register: output

#- name: Start Docker
#  shell: docker-compose -f /docker/docker-compose.yml up -d

#- name: Start Docker
#  command: >
#    docker-compose -f /docker/docker-compose.yml up -d
